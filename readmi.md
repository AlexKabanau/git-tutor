first commit

Refactor error handling